{
  "version": "0.1",
  "defaults": {
    "cwd": ".",
    "stdout": "logs/${asset}.out",
    "stderr": "logs/${asset}.err",
    "env": {
      "prepend": {
        "lib_path": [
          "/usr/local/hakoniwa/lib"
        ],
        "PATH": ["/usr/local/hakoniwa/bin"] 
      }
    },    
    "start_grace_sec": 1,
    "delay_sec": 3
  },
  "assets": [
    {
      "name": "drone",
      "activation_timing": "before_start",
      "command": "${HAKO_DRONE_OS}-main_hako_drone_service",
      "args": [
        "config/drone/mujoco-shibuya-api-10",
        "config/pdudef/webavatar-10.json"
      ],
      "cwd": "${HAKO_DRONE_PROJECT_PATH}",
      "delay_sec": 5
    },
    {
      "name": "viewer-webserver",
      "activation_timing": "after_start",
      "command": "${PYTHON_PATH}",
      "args": [
        "-m","http.server", "8001"
        ],
      "cwd": "${HAKO_VIEW_WEBSERVER_PATH}",
      "depends_on": ["drone"]
    },
    {
      "name": "webserver",
      "activation_timing": "after_start",
      "command": "${PYTHON_PATH}",
      "args": ["-m","server.main","--asset_name","WebServer",
               "--config_path","${HAKO_DRONE_PROJECT_PATH}/config/pdudef/webavatar-10.json",
               "--delta_time_usec","20000"],
      "cwd": "${HAKO_WEBSERVER_PATH}",
      "depends_on": ["drone"]
    },
    {
      "name": "environment",
      "activation_timing": "before_start",
      "command": "${PYTHON_PATH}",
      "args": [
        "-m",
        "hakoniwa_envsim.envasset",
        "${HAKO_DRONE_PROJECT_PATH}/config/pdudef/webavatar-10.json",
        "20", 
        "../examples/datasets/shibuya/generated"
      ],
      "cwd": "${HAKO_ENVSIM_PATH}/src",
      "depends_on": ["drone"]
    },
    {
      "name": "api_control-1",
      "activation_timing": "after_start",
      "command": "${PYTHON_PATH}",
      "args": [
        "-m",
        "env_api_test",
        "--name", "Drone",
        "--config-path", "../../config/pdudef/webavatar-10.json",
        "--mission-file", "mission1.json"
      ],
      "cwd": "${HAKO_DRONE_PROJECT_PATH}/drone_api/pymavlink",
      "depends_on": ["environment"]
    },
    {
      "name": "api_control-2",
      "activation_timing": "after_start",
      "command": "${PYTHON_PATH}",
      "args": [
        "-m",
        "env_api_test",
        "--name", "Drone1",
        "--config-path", "../../config/pdudef/webavatar-10.json",
        "--mission-file", "mission2.json"
      ],
      "cwd": "${HAKO_DRONE_PROJECT_PATH}/drone_api/pymavlink",
      "depends_on": ["environment"]
    },
    {
      "name": "api_control-3",
      "activation_timing": "after_start",
      "command": "${PYTHON_PATH}",
      "args": [
        "-m",
        "env_api_test",
        "--name", "Drone2",
        "--config-path", "../../config/pdudef/webavatar-10.json",
        "--mission-file", "mission3.json"
      ],
      "cwd": "${HAKO_DRONE_PROJECT_PATH}/drone_api/pymavlink",
      "depends_on": ["environment"]
    },
    {
      "name": "api_control-4",
      "activation_timing": "after_start",
      "command": "${PYTHON_PATH}",
      "args": [
        "-m",
        "env_api_test",
        "--name", "Drone3",
        "--config-path", "../../config/pdudef/webavatar-10.json",
        "--mission-file", "mission4.json"
      ],
      "cwd": "${HAKO_DRONE_PROJECT_PATH}/drone_api/pymavlink",
      "depends_on": ["environment"]
    },
    {
      "name": "api_control-5",
      "activation_timing": "after_start",
      "command": "${PYTHON_PATH}",
      "args": [
        "-m",
        "env_api_test",
        "--name", "Drone4",
        "--config-path", "../../config/pdudef/webavatar-10.json",
        "--mission-file", "mission5.json"
      ],
      "cwd": "${HAKO_DRONE_PROJECT_PATH}/drone_api/pymavlink",
      "depends_on": ["environment"]
    },
    {
      "name": "api_control-6",
      "activation_timing": "after_start",
      "command": "${PYTHON_PATH}",
      "args": [
        "-m",
        "env_api_test",
        "--name", "Drone5",
        "--config-path", "../../config/pdudef/webavatar-10.json",
        "--mission-file", "mission6.json"
      ],
      "cwd": "${HAKO_DRONE_PROJECT_PATH}/drone_api/pymavlink",
      "depends_on": ["environment"]
    },
    {
      "name": "api_control-7",
      "activation_timing": "after_start",
      "command": "${PYTHON_PATH}",
      "args": [
        "-m",
        "env_api_test",
        "--name", "Drone6",
        "--config-path", "../../config/pdudef/webavatar-10.json",
        "--mission-file", "mission7.json"
      ],
      "cwd": "${HAKO_DRONE_PROJECT_PATH}/drone_api/pymavlink",
      "depends_on": ["environment"]
    },
    {
      "name": "api_control-8",
      "activation_timing": "after_start",
      "command": "${PYTHON_PATH}",
      "args": [
        "-m",
        "env_api_test",
        "--name", "Drone7",
        "--config-path", "../../config/pdudef/webavatar-10.json",
        "--mission-file", "mission8.json"
      ],
      "cwd": "${HAKO_DRONE_PROJECT_PATH}/drone_api/pymavlink",
      "depends_on": ["environment"]
    },
    {
      "name": "api_control-9",
      "activation_timing": "after_start",
      "command": "${PYTHON_PATH}",
      "args": [
        "-m",
        "env_api_test",
        "--name", "Drone8",
        "--config-path", "../../config/pdudef/webavatar-10.json",
        "--mission-file", "mission9.json"
      ],
      "cwd": "${HAKO_DRONE_PROJECT_PATH}/drone_api/pymavlink",
      "depends_on": ["environment"]
    },
    {
      "name": "api_control-10",
      "activation_timing": "after_start",
      "command": "${PYTHON_PATH}",
      "args": [
        "-m",
        "env_api_test",
        "--name", "Drone9",
        "--config-path", "../../config/pdudef/webavatar-10.json",
        "--mission-file", "mission10.json"
      ],
      "cwd": "${HAKO_DRONE_PROJECT_PATH}/drone_api/pymavlink",
      "depends_on": ["environment"]
    }
  ],
  "notify": {
    "type": "exec",
    "command": "scripts/notify_on_fail.sh",
    "args": ["${asset}", "asset_exit", "${timestamp}"]
  }
}
